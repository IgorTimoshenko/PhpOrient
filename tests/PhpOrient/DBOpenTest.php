<?php

namespace PhpOrient;

class DBOpenTest extends TestCase {

    /**
     * @var Client
     */
    protected $client;

    public function setUp(){
        $this->client = $this->createClient();
    }

    public function testDBOpen(){

        $result = $this->client->execute( 'dbOpen', array( 'database' => 'GratefulDeadConcerts' ) );

        $this->assertNotEquals( -1, $result['sessionId'] );
        $this->assertNotEmpty( $result['dataClusters'] );

        $key_exists = false;
        foreach ( $result['dataClusters'] as $cluster ){
            $key_exists = $key_exists || ( $cluster['name'] == "followed_by" );
            if( $key_exists ) { $id = $cluster['id']; }
        }

        $this->assertTrue( $key_exists );
        $this->assertTrue( isset( $id ) );
        $this->assertTrue(true);

    }

}
